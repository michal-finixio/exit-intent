function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,n=arguments[t];for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(n,o,e){var i,r,a,s,u,c,f=0,l=!1,d=!1,t=!0;if("function"!=typeof n)throw new TypeError(FUNC_ERROR_TEXT);function v(e){var t=i,o=r;return i=r=void 0,f=e,s=n.apply(o,t)}function b(e){var t=e-c;return void 0===c||o<=t||t<0||d&&a<=e-f}function p(){var e,t=now();if(b(t))return m(t);u=setTimeout(p,(t=o-((e=t)-c),d?nativeMin(t,a-(e-f)):t))}function m(e){return u=void 0,t&&i?v(e):(i=r=void 0,s)}function g(){var e=now(),t=b(e);if(i=arguments,r=this,c=e,t){if(void 0===u)return f=t=c,u=setTimeout(p,o),l?v(t):s;if(d)return u=setTimeout(p,o),v(c)}return void 0===u&&(u=setTimeout(p,o)),s}return o=toNumber(o)||0,isObject(e)&&(l=!!e.leading,d="maxWait"in e,a=d?nativeMax(toNumber(e.maxWait)||0,o):a,t="trailing"in e?!!e.trailing:t),g.cancel=function(){void 0!==u&&clearTimeout(u),i=c=r=u=void(f=0)},g.flush=function(){return void 0===u?s:m(now())},g}function throttle(e,t,o){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);return isObject(o)&&(n="leading"in o?!!o.leading:n,i="trailing"in o?!!o.trailing:i),debounce(e,t,{leading:n,maxWait:t,trailing:i})}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if("string"!=typeof(e=isObject(e)?isObject(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=e.replace(reTrim,"");var t=reIsBinary.test(e);return t||reIsOctal.test(e)?freeParseInt(e.slice(2),t?2:8):reIsBadHex.test(e)?NAN:+e}var lodash_throttle=throttle,build={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return!("undefined"==typeof window||!("ontouchstart"in window||window.DocumentTouch&&"undefined"!=typeof document&&document instanceof window.DocumentTouch))||!("undefined"==typeof navigator||!navigator.maxTouchPoints&&!navigator.msMaxTouchPoints)},e.exports=t.default}(build,build.exports);var isTouchDevice=getDefaultExportFromCjs(build.exports),defaultOptions={debug:!1,maxDisplays:99999,eventThrottle:200,showAfterInactiveSecondsDesktop:60,showAfterInactiveSecondsMobile:40,showAgainAfterSeconds:10,onExitIntent:function(){}},isDesktop=!isTouchDevice(),resetTimeoutDesktopTriggers=["touchstart","touchend","touchmove"];function ExitIntent(e){function n(){if(i.debug){for(var e,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];(e=console).log.apply(e,["[exit-intent-debug]"].concat(o))}}var t,i=_extends({},defaultOptions,e=void 0===e?{}:e),o=0,r=isDesktop?i.showAfterInactiveSecondsDesktop:i.showAfterInactiveSecondsMobile,a=[],s=lodash_throttle(function(){o<i.maxDisplays&&(n("display onExitIntent",o+=1),i.onExitIntent(),o>=i.maxDisplays&&f())},1e3*i.showAgainAfterSeconds,{trailing:!1});isDesktop&&(n("register mouseleave trigger for desktop"),onMouseLeaveListener=document.body.addEventListener("mouseleave",lodash_throttle(function(e){e instanceof MouseEvent&&(n("mouseleave trigger"),s())},i.eventThrottle),!1));function u(){void 0!==r?(void 0!==t&&(n("clear inactivity timeout"),window.clearTimeout(t)),t=window.setTimeout(function(){n("exit intent trigger by inactivity after "+1e3*r),s()},1e3*r)):n("exit intent trigger by inactivity is disabled")}var c=isDesktop?window:document.body;resetTimeoutDesktopTriggers.forEach(function(e){!function(t,e){n("registering event for restartTimer",t,e);var o=e.addEventListener(t,lodash_throttle(function(e){n("throttled to restart timer",t),u()},i.eventThrottle),!1);a.push({event:t,listener:o,target:e})}(e,c)});var f=function(){n("cleanup after "+o+" displays"),onMouseLeaveListener&&document.body.removeEventListener("mouseleave",onMouseLeaveListener),a.forEach(function(e){var t=e.event,o=e.listener;e.target.removeEventListener(t,o)})};u()}export default ExitIntent;
