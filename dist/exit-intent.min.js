var ExitIntent=function(){"use strict";function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,o=arguments[t];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m="Expected a function",i=NaN,r="[object Symbol]",l=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt,n="object"==typeof e&&e&&e.Object===Object&&e,o="object"==typeof self&&self&&self.Object===Object&&self,f=n||o||Function("return this")(),d=Object.prototype.toString,w=Math.max,y=Math.min,T=function(){return f.Date.now()};function v(o,n,e){var i,r,l,a,c,u,s=0,f=!1,d=!1,t=!0;if("function"!=typeof o)throw new TypeError(m);function v(e){var t=i,n=r;return i=r=void 0,s=e,a=o.apply(n,t)}function g(e){var t=e-u;return void 0===u||n<=t||t<0||d&&l<=e-s}function p(){var e,t=T();if(g(t))return b(t);c=setTimeout(p,(t=n-((e=t)-u),d?y(t,l-(e-s)):t))}function b(e){return c=void 0,t&&i?v(e):(i=r=void 0,a)}function h(){var e=T(),t=g(e);if(i=arguments,r=this,u=e,t){if(void 0===c)return s=t=u,c=setTimeout(p,n),f?v(t):a;if(d)return c=setTimeout(p,n),v(u)}return void 0===c&&(c=setTimeout(p,n)),a}return n=x(n)||0,O(e)&&(f=!!e.leading,d="maxWait"in e,l=d?w(x(e.maxWait)||0,n):l,t="trailing"in e?!!e.trailing:t),h.cancel=function(){void 0!==c&&clearTimeout(c),i=u=r=c=void(s=0)},h.flush=function(){return void 0===c?a:b(T())},h}function O(e){var t=typeof e;return e&&("object"==t||"function"==t)}function x(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||!!(n=t)&&"object"==typeof n&&d.call(t)==r)return i;var t,n;if("string"!=typeof(e=O(e)?O(o="function"==typeof e.valueOf?e.valueOf():e)?o+"":o:e))return 0===e?e:+e;e=e.replace(l,"");var o=c.test(e);return o||u.test(e)?s(e.slice(2),o?2:8):a.test(e)?i:+e}var h=function(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError(m);return O(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),v(e,t,{leading:o,maxWait:t,trailing:i})},e={exports:{}};o=(n=e).exports,Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(){return!("undefined"==typeof window||!("ontouchstart"in window||window.DocumentTouch&&"undefined"!=typeof document&&document instanceof window.DocumentTouch))||!("undefined"==typeof navigator||!navigator.maxTouchPoints&&!navigator.msMaxTouchPoints)},n.exports=o.default;function S(e){return!!e&&e<D}var M={maxDisplays:99999,showAgainAfterSeconds:30,showAfterInactiveSecondsDesktop:60,showAfterInactiveSecondsMobile:40,enableOnInactivityDesktop:!0,enableOnInactivityMobile:!0,enableOnMouseleaveDesktop:!0,enableOnBlurMobile:!0,enableOnScrollBottomMobile:2500,scrollBottomOffsetPx:200,enableOnFastScrollTopMobile:2500,scrollTopStartingArticleDepth:.5,scrollTopSecondsToScroll:2,eventThrottle:200,debug:!1,onExitIntent:function(){console.log("onExitIntent action")}},E=!t(e.exports)(),j=E?document.body:window,D=document.body.scrollHeight,I=["scroll","mousemove","wheel"],A=["touchstart","touchend","touchmove"];return function(e){function t(){if(a.debug){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];(e=console).log.apply(e,["[exit-intent-debug]"].concat(n))}}var n,o,i,r,l,a=b({},M,e=void 0===e?{}:e),c=0,u=[],s=E?a.enableOnInactivityDesktop:a.enableOnInactivityMobile,f=E?a.showAfterInactiveSecondsDesktop:a.showAfterInactiveSecondsMobile,e=E?I:A,d=h(function(e){c<a.maxDisplays&&(t("trigger successtul (after cooldown time)",c+=1),a.onExitIntent(e),c>=a.maxDisplays&&p())},1e3*a.showAgainAfterSeconds,{trailing:!1});E&&a.enableOnMouseleaveDesktop&&(t("register mouseleave trigger for desktop"),o=h(function(e){e instanceof MouseEvent&&(t("mouseleave trigger"),d())},a.eventThrottle),j.addEventListener("mouseleave",o,!1),u.push({event:"mouseleave",handler:o,target:j})),E||(a.enableOnBlurMobile&&(t("register on blur trigger for mobile"),o=h(function(){t("blur trigger"),d()},a.eventThrottle),j.addEventListener("blur",o,!1),u.push({event:"blur",handler:o,target:j})),S(a.enableOnScrollBottomMobile)&&(t("register on scroll bottom trigger for mobile"),l=h(function(){setTimeout(function(){window.innerHeight+window.scrollY+a.scrollBottomOffsetPx>=D&&(t("scroll to bottom trigger"),d())},100)},a.eventThrottle),j.addEventListener("scroll",l,!1),u.push({event:"scroll",handler:l,target:j})),S(a.enableOnFastScrollTopMobile)&&(t("register on scroll top trigger for mobile"),i=D*a.scrollTopStartingArticleDepth,r=0,l=function(e){window.innerHeight+window.scrollY>i&&(r=e.timeStamp)},v=function(e){setTimeout(function(){window.scrollY<100&&e.timeStamp-r<1e3*a.scrollTopSecondsToScroll&&(t("fast scroll to top trigger"),d())},100)},j.addEventListener("touchstart",l,!1),j.addEventListener("touchend",v,!1),u.push({event:"touchstart",handler:l,target:j}),u.push({event:"touchend",handler:v,target:j})));var v=function(){s&&void 0===f?t("exit intent trigger by inactivity is disabled"):(void 0!==n&&(t("clear inactivity timeout"),window.clearTimeout(n)),n=window.setTimeout(function(){t("exit intent trigger by inactivity after "+f+"s"),d()},1e3*f))},g=h(v,a.eventThrottle);e.forEach(function(e){t("registering event for restartTimer",{event:e,target:j}),j.addEventListener(e,g,!1),u.push({event:e,handler:g,target:j})});var p=function(){t("cleanup after "+c+" displays"),void 0!==n&&window.clearTimeout(n),u.forEach(function(e){var t=e.event,n=e.handler;e.target.removeEventListener(t,n)})};return v(),p}}();
